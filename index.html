<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate HU Tracker</title>
    <style>
        :root {
            --bg: #121212; --card-bg: #1e1e1e; --text: #e0e0e0;
            --accent: #ff4757; --green: #2ed573; --blue: #1e90ff; --gold: #ffa502;
        }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; }
        .app { width: 100%; max-width: 500px; background: var(--card-bg); border-radius: 12px; padding: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.8); }
        
        /* Grille de cartes */
        .card-selector { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-bottom: 15px; }
        .card-btn { padding: 8px 2px; border: 1px solid #444; background: #333; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em; }
        .card-btn.selected { background: var(--blue); border-color: white; }
        .card-btn.board-selected { background: var(--gold); }

        .row { display: flex; justify-content: space-between; gap: 10px; margin-bottom: 10px; }
        .input-group { flex: 1; display: flex; flex-direction: column; }
        input { padding: 8px; border-radius: 4px; border: none; background: #333; color: white; margin-top: 4px; }

        .btn { padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; }
        .btn-toggle { background: #444; color: white; margin-bottom: 10px; }
        .btn-toggle.active { background: var(--green); }
        .btn-main { background: var(--blue); font-size: 1.1em; margin-top: 10px; }
        .btn-reset { background: var(--accent); margin-top: 10px; font-size: 0.8em; opacity: 0.8; }

        #display-hand, #display-board { font-size: 1.2em; font-weight: bold; text-align: center; margin: 10px 0; min-height: 1.5em; }
        .advice { margin-top: 15px; padding: 15px; border-radius: 8px; font-size: 1.2em; font-weight: bold; text-align: center; border: 2px solid transparent; }
        .push { background: #ff475722; border-color: #ff4757; color: #ff4757; }
        .fold { background: #333; border-color: #666; color: #999; }
        .call { background: #1e90ff22; border-color: #1e90ff; color: #1e90ff; }
        .raise { background: #2ed57322; border-color: #2ed573; color: #2ed573; }
    </style>
</head>
<body>

<div class="app">
    <h2 style="text-align:center; color:var(--blue); margin-top:0;">HU Pro Assistant</h2>

    <div class="row">
        <button id="pos-btn" class="btn btn-toggle active" onclick="togglePos()">AU BOUTON (Chef)</button>
        <button class="btn btn-toggle" style="background:var(--accent)" onclick="resetAll()">RESET TABLE</button>
    </div>

    <div class="row">
        <div class="input-group">
            <label>Moi (BB)</label>
            <input type="number" id="my-stack" value="25">
        </div>
        <div class="input-group">
            <label>Lui (BB)</label>
            <input type="number" id="opp-stack" value="25">
        </div>
        <div class="input-group">
            <label>Mise Adv. (BB)</label>
            <input type="number" id="opp-bet" value="0">
        </div>
    </div>

    <div id="display-hand">Ma main: ? ?</div>
    <div id="display-board" style="color:var(--gold)">Board: - - - - -</div>

    <div class="card-selector" id="selector">
        </div>

    <button class="btn btn-main" onclick="analyze()">ANALYSER LA SITUATION</button>

    <div id="advice-box" class="advice">En attente de données...</div>
</div>

<script>
    const cards = ['A', 'K', 'Q', 'J', 'T', '9', '8', '7', '6', '5', '4', '3', '2'];
    let myHand = [];
    let board = [];
    let isButton = true;

    // Générer le sélecteur
    const selector = document.getElementById('selector');
    cards.forEach(c => {
        const b = document.createElement('button');
        b.className = 'card-btn';
        b.innerText = c;
        b.onclick = () => selectCard(c, b);
        selector.appendChild(b);
    });

    function selectCard(card, el) {
        if (myHand.length < 2) {
            myHand.push(card);
            el.classList.add('selected');
            updateDisplay();
        } else if (board.length < 5) {
            board.push(card);
            el.classList.add('board-selected');
            updateDisplay();
        }
    }

    function updateDisplay() {
        document.getElementById('display-hand').innerText = "Ma main: " + (myHand.join(' ') || "? ?");
        document.getElementById('display-board').innerText = "Board: " + (board.join(' ') || "- - - - -");
    }

    function togglePos() {
        isButton = !isButton;
        const btn = document.getElementById('pos-btn');
        btn.innerText = isButton ? "AU BOUTON (Chef)" : "HORS POSITION";
        btn.classList.toggle('active');
    }

    function resetAll() {
        myHand = []; board = [];
        document.querySelectorAll('.card-btn').forEach(b => b.className = 'card-btn');
        document.getElementById('opp-bet').value = 0;
        updateDisplay();
        document.getElementById('advice-box').className = 'advice';
        document.getElementById('advice-box').innerText = "Table réinitialisée.";
    }

    function analyze() {
        const myBB = parseFloat(document.getElementById('my-stack').value);
        const oppBet = parseFloat(document.getElementById('opp-bet').value);
        const advice = document.getElementById('advice-box');
        
        if (myHand.length < 2) { advice.innerText = "Sélectionne tes cartes !"; return; }

        let power = getPower(myHand);
        
        // --- LOGIQUE HEADS-UP ---
        if (board.length === 0) { // PRE-FLOP
            if (myBB <= 10) { // STRATEGIE PETIT TAPIS
                if (power >= 8 || myHand.includes('A')) {
                    showAdvice("ALL-IN (Tapis !)", "push");
                } else {
                    showAdvice("FOLD (Jette)", "fold");
                }
            } else if (isButton) { // AU BOUTON
                if (oppBet > 0) {
                    if (power >= 10) showAdvice("SUR-RELANCE (3-Bet)", "push");
                    else showAdvice("PAYE (Call)", "call");
                } else {
                    showAdvice("RELANCE (2.2 BB)", "raise");
                }
            } else { // HORS POSITION
                if (oppBet > 2.5) {
                    if (power >= 11) showAdvice("RELANCE / ALL-IN", "push");
                    else if (power >= 8) showAdvice("PAYE", "call");
                    else showAdvice("FOLD", "fold");
                } else {
                    showAdvice("CHECK / DEFENSE", "call");
                }
            }
        } else { // POST-FLOP (Simplifié)
            if (myHand.includes(board[0]) || myHand.includes(board[1]) || power >= 12) {
                showAdvice("ATTAQUE / MISE 50% POT", "raise");
            } else {
                showAdvice("PRUDENCE / CHECK-FOLD", "fold");
            }
        }
    }

    function getPower(hand) {
        const values = { 'A': 14, 'K': 13, 'Q': 12, 'J': 11, 'T': 10 };
        let v1 = values[hand[0]] || parseInt(hand[0]);
        let v2 = values[hand[1]] || parseInt(hand[1]);
        return v1 + v2 + (hand[0] === hand[1] ? 10 : 0);
    }

    function showAdvice(text, type) {
        const advice = document.getElementById('advice-box');
        advice.className = 'advice ' + type;
        advice.innerText = text;
    }
</script>
</body>
</html>
